Description: Put the private library in a private place
Author: Didier Raboud <didier@raboud.com>
Origin: vendor
Forwarded: yes (IRC)
Last-Update: 2010-07-21
Index: lightspark/CMakeLists.txt
===================================================================
--- lightspark.orig/CMakeLists.txt	2010-07-22 11:39:15.000000000 +0200
+++ lightspark/CMakeLists.txt	2010-07-22 11:40:24.000000000 +0200
@@ -48,6 +48,8 @@
 SET(BINDIR "bin")
 SET(DATADIR "share")
 SET(LIBDIR "lib${LIB_SUFFIX}")
+# DEBIAN PATCH
+SET(PRIVATELIBDIR "lib/lightspark")
 
 # Setting variables
 SET(CMAKE_INSTALL_PREFIX "/usr" CACHE PATH "Install prefix" FORCE)
@@ -62,6 +64,11 @@
       FORCE)
 ENDIF(NOT CMAKE_BUILD_TYPE)
 
+# DEBIAN PATCH
+# The library is searched in its private library directory
+SET(CMAKE_SKIP_BUILD_RPATH FALSE)
+SET(CMAKE_INSTALL_RPATH "${CMAKE_INSTALL_PREFIX}/${PRIVATELIBDIR}")
+
 # Some directory shortcuts
 SET(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/conf)
 
@@ -154,7 +161,7 @@
 SET_TARGET_PROPERTIES(spark PROPERTIES SOVERSION "${MAJOR_VERSION}.${MINOR_VERSION}")
 
 IF(UNIX)
-	INSTALL(TARGETS spark LIBRARY DESTINATION ${LIBDIR})
+	INSTALL(TARGETS spark LIBRARY DESTINATION ${PRIVATELIBDIR})
 ENDIF(UNIX)
 
 # lightspark executable target
